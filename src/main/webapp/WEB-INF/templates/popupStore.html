
<head>
    <title>naverMaps</title>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=5y2qd5fi66"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
</head>
<body>
    <div th:insert="~{fragment/header :: header}"></div>
    <div class="popup-store-box" style="display: flex">
        <div class="popup-store-left-list" style="display: inline-block; height: 800px; width: 40%">
            <ul>
                <li>2024 주술회전 팝업스토어</li>
                <li>짱구 팝업스토어 2024</li>
            </ul>
        </div>
        <div class="map" id="map" style="width:60%; height:800px; display: inline-block"></div>
    </div>
    <div th:insert="~{fragment/footer :: footer}"></div>
<script>
    $(function() {

        initMap();

    });


    function initMap() {

        var areaArr = new Array();  // 지역을 담는 배열 ( 지역명/위도경도 )
        areaArr.push(
            /*지역구 이름*/			/*위도*/					/*경도*/
            {
                location: "부산/ 대구 달서구 두류공원로 200 이월드<br>두근두근 도라에몽전 in 부산",
                lat: "35.8548554163402",
                lng: "128.564820995296"
            },
            {
                location: "서울특별시 중구 을지로 281 동대문디자인플라자뮤지엄<br>헬로키티 50주년 특별전 : 산리오 캐릭터즈와의 여행",
                lat: "37.5680445876689",
                lng: "127.010890355484"
            },
            {
                location: "용산 아이파크몰 팝콘D스퀘어<br>원피스 대해적시대展",
                lat: "37.5297718014452",
                lng: "126.964741503485"
            },
            {
                location: "더현대 서울<br>2024주술회전 팝업스토어",
                lat: "37.5251913154781",
                lng: "126.929112756574"
            },
            {
                location: "더현대 대구<br>2024주술회전 팝업스토어",
                lat: "35.8666296004242",
                lng: "128.590625718585"
            },
            {
                location: "서울(잠실) 롯데월드몰<br>짱구 팝업스토어 2024",
                lat: "37.5137129859207",
                lng: "127.104301829165"
            },
            {
                location: "전주 한옥마을<br>짱구 팝업스토어 2024",
                lat: "35.8182133310179",
                lng: "127.153608497904"
            },
            {
                location: "대구 현대백화점 더현대<br>짱구 팝업스토어 2024",
                lat: "35.8666296004242",
                lng: "128.590625718585"
            },
            {
                location: "부산 신세계백화점 센텀시티<br>짱구 팝업스토어 2024",
                lat: "35.1688178394069",
                lng: "129.129523260187"
            }
        );



        let markers = new Array(); // 마커 정보를 담는 배열
        let infoWindows = new Array(); // 정보창을 담는 배열

        var map = new naver.maps.Map('map', {
            center: new naver.maps.LatLng(37.552758094502494, 126.98732600494576), //지도 시작 지점
            zoom: 15
        });




        for (var i = 0; i < areaArr.length; i++) {
            // 지역을 담은 배열의 길이만큼 for문으로 마커와 정보창을 채워주자 !

            var marker = new naver.maps.Marker({
                map: map,
                title: areaArr[i].location, // 지역구 이름
                position: new naver.maps.LatLng(areaArr[i].lat , areaArr[i].lng) // 지역구의 위도 경도 넣기
            });

            /* 정보창 */
            var infoWindow = new naver.maps.InfoWindow({
                content: '<div style="width:250px;text-align:center;padding:10px;"><b>' + areaArr[i].location + '</b><br> - 네이버 지도 - </div>'
            }); // 클릭했을 때 띄워줄 정보 HTML 작성

            markers.push(marker); // 생성한 마커를 배열에 담는다.
            infoWindows.push(infoWindow); // 생성한 정보창을 배열에 담는다.
        }


        function getClickHandler(seq) {

            return function(e) {  // 마커를 클릭하는 부분
                var marker = markers[seq], // 클릭한 마커의 시퀀스로 찾는다.
                    infoWindow = infoWindows[seq]; // 클릭한 마커의 시퀀스로 찾는다

                if (infoWindow.getMap()) {
                    infoWindow.close();
                } else {
                    infoWindow.open(map, marker); // 표출
                }
            }
        }

        for (var i=0, ii=markers.length; i<ii; i++) {
            console.log(markers[i] , getClickHandler(i));
            naver.maps.Event.addListener(markers[i], 'click', getClickHandler(i)); // 클릭한 마커 핸들러
        }
    }


</script>
</body>
